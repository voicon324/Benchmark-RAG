# Simple OptimizedBM25 Test - All Optimizations Applied
# Single model test with all optimization features enabled

description: "Simple test for OptimizedBM25Model with all optimizations applied"

models:
  - name: "optimized_bm25_all_features"
    type: "optimized_sparse"
    model_name_or_path: ""
    parameters:
      # BM25 parameters
      k1: 1.6
      b: 0.75
      tokenizer: "simple"
      lowercase: true
      remove_stopwords: true
      min_token_length: 2
      stopwords: ["a", "an", "and", "are", "as", "at", "be", "by", "for", "from", "has", "he", "in", "is", "it", "its", "of", "on", "that", "the", "to", "was", "were", "will", "with"]
      
      # All optimization features enabled
      use_parallel_indexing: true
      num_workers: 8
      use_sparse_matrix: true
      use_memory_mapping: true
      use_caching: true
      cache_size: 50000
      batch_size: 2000
      use_gpu: false
      enable_pruning: true
      pruning_threshold: 0.1
      use_fast_tokenizer: true
      early_termination_k: 1000
    device: "cpu"
    batch_size: 64

datasets:
  - name: "bkai_legal_test_data"
    type: "text"
    data_dir: "/home/hkduy/NewAI/new_bench/BKAI_law_data/newaibench_formatted_data/legal_data"
    max_samples: 50000  # Small dataset for quick test
    config_overrides:
      cache_enabled: true
      validation_enabled: true
      queries_file: "train_queries.jsonl"
      qrels_file: "train_qrels.txt"

evaluation:
  metrics: ["ndcg", "map", "recall", "precision", "mrr"]
  k_values: [1, 5, 10]
  relevance_threshold: 1
  include_per_query: false
  top_k: 100
  save_run_file: true
  run_file_format: "trec"

output:
  output_dir: "./results/simple_optimized_bm25_test"
  experiment_name: "optimized_bm25_all_features"
  save_models: false
  save_intermediate: false
  log_level: "INFO"
  overwrite: true
