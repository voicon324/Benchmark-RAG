# VietDocVQA PhoBERT Only Experiment
# Test PhoBERT alone to avoid GPU conflicts

description: "VietDocVQA PhoBERT Only Test"

models:
  - name: "phobert_vietnamese"
    type: "dense"
    model_name_or_path: "vinai/phobert-base"
    parameters:
      normalize_embeddings: true
      model_architecture: "transformers"
      pooling_mode: "mean"
    device: "cpu"  # Force CPU to avoid CUDA tokenization issues
    batch_size: 1  # Reduced batch size for safety
    max_seq_length: 64  # Reduced even further for Vietnamese tokenization

datasets:
  - name: "vietdocvqa_ocr"
    type: "text"
    data_dir: "/home/hkduy/NewAI/new_bench/NewAIBench_VietDocVQAII_with_OCR"
    max_samples: 100  # Further reduced for debugging
    config_overrides:
      corpus_file: "corpus_processed.jsonl"
      qrels_file: "qrels.jsonl"

evaluation:
  metrics: ["ndcg", "map", "recall", "precision", "mrr"]
  k_values: [1, 3, 5, 10]
  relevance_threshold: 1
  include_per_query: true
  top_k: 50
  save_run_file: true
  run_file_format: "trec"

output:
  output_dir: "./results/vietdocvqa_phobert_only"
  experiment_name: "vietdocvqa_phobert_only_test"
  save_models: false
  save_intermediate: true
  log_level: "INFO"
  overwrite: true
